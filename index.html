<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÙˆÙ‚ Ø§Ù„Ø³ÙˆØ¯Ø§Ù† Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ ğŸ‡¸ğŸ‡©</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    
    <style>
        :root { --primary: #008000; --secondary: #ff9900; --bg: #f4f7f6; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; margin: 0; background: var(--bg); padding-bottom: 60px; }
        .header-main { position: sticky; top: 0; z-index: 5000; background: var(--primary); padding: 15px 0; text-align: center; color: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .search-box { width: 90%; padding: 12px; border-radius: 25px; border: none; margin-top: 10px; outline: none; }
        .nav-bar { display: flex; overflow-x: auto; background: white; padding: 10px; gap: 8px; border-bottom: 1px solid #ddd; position: sticky; top: 110px; z-index: 4000; }
        .nav-btn { background: #eee; border: none; padding: 8px 15px; border-radius: 20px; white-space: nowrap; font-weight: bold; font-size: 12px; cursor: pointer; }
        .products-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 10px; }
        .product-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.05); text-align: center; padding-bottom: 10px; border: 1px solid #eee; }
        .product-card img { width: 100%; height: 120px; object-fit: cover; }
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 10000; overflow-y: auto; }
        .overlay-header { background: var(--primary); color: white; padding: 15px; display: flex; align-items: center; }
        .form-box { background: white; margin: 15px; padding: 15px; border-radius: 12px; }
        .input-st { width: 100%; padding: 10px; margin-bottom: 8px; border-radius: 5px; border: 1px solid #ddd; box-sizing: border-box; }
        .approved-card { background: white; margin: 15px; padding: 15px; border-radius: 12px; border-right: 5px solid #25D366; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .buy-now { background: #25D366; color: white; text-decoration: none; display: block; text-align: center; padding: 12px; border-radius: 8px; font-weight: bold; margin-top: 10px; }
    </style>
</head>
<body>

<div class="header-main">
    <b>Ø³ÙˆÙ‚ Ø§Ù„Ø³ÙˆØ¯Ø§Ù† Ø§Ù„Ø´Ø§Ù…Ù„ ğŸ‡¸ğŸ‡©</b>
    <input type="text" id="sInp" class="search-box" placeholder="ğŸ” Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø³Ø­Ø§Ø¨Ø©..." onkeyup="search()">
</div>

<div class="nav-bar">
    <div class="nav-btn" onclick="go('mobs')">ğŸ“± Ù…ÙˆØ¨Ø§ÙŠÙ„Ø§Øª</div>
    <div class="nav-btn" onclick="go('laps')">ğŸ’» Ù„Ø§Ø¨ØªÙˆØ¨Ø§Øª</div>
    <div class="nav-btn" onclick="go('women')">ğŸ’ƒ Ù†Ø³Ø§Ø¦ÙŠ</div>
    <div class="nav-btn" onclick="go('kids')">ğŸ‘¶ Ø£Ø·ÙØ§Ù„ÙŠ</div>
    <div class="nav-btn" onclick="go('perf')">âœ¨ Ø¹Ø·ÙˆØ±</div>
    <div class="nav-btn" onclick="go('food')">ğŸ›’ Ø¨Ù‚Ø§Ù„Ø©</div>
    <div class="nav-btn" onclick="go('tools')">ğŸ› ï¸ Ù…ØºØ§Ù„Ù‚</div>
</div>

<div id="main-content"></div>

<div id="overlay" class="overlay">
    <div class="overlay-header">
        <button onclick="closeLayer()" style="background:white; border:none; padding:5px 10px; border-radius:5px; margin-left:10px; font-weight:bold;">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
        <b id="layerTitle">Ø³ÙˆÙ‚ Ø§Ù„ØªØ¬Ø§Ø±</b>
    </div>
    <div class="form-box">
        <h4 style="margin:0 0 10px 0; color:var(--primary);">ğŸ“¢ Ø£Ø¶Ù Ø¹Ø±Ø¶Ùƒ Ù„Ù„Ø³Ø­Ø§Ø¨Ø©</h4>
        <input type="text" id="pName" class="input-st" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
        <textarea id="pDesc" class="input-st" placeholder="Ø§Ù„Ø³Ø¹Ø± ÙˆØ§Ù„ØªÙØ§ØµÙŠÙ„"></textarea>
        <input type="number" id="pWa" class="input-st" placeholder="Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨Ùƒ">
        <button onclick="saveToCloud()" style="width:100%; padding:12px; background:var(--secondary); color:white; border:none; border-radius:8px; font-weight:bold; cursor:pointer;">Ù†Ø´Ø± Ø§Ù„Ø¹Ø±Ø¶ Ø­ÙŠØ§Ù‹ âœ…</button>
    </div>
    <div id="items-list"></div>
</div>

<script>
    // ØªÙ… Ø¬Ù„Ø¨ Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† ØµÙˆØ±Ùƒ Ø¨Ù†Ø¬Ø§Ø­
    const firebaseConfig = {
        apiKey: "AIzaSyAI_mUhuPNoO-XC0Q-VNoWft8UWFbAbIGg",
        authDomain: "sudan-market-6b122.firebaseapp.com",
        databaseURL: "https://sudan-market-6b122-default-rtdb.firebaseio.com",
        projectId: "sudan-market-6b122",
        storageBucket: "sudan-market-6b122.firebasestorage.app",
        messagingSenderId: "66729481566",
        appId: "1:66729481566:web:93393f28dc22d32cceebcf"
    };
    
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    let currentCat = '';

    const sections = [
        { id: 'mobs', title: 'ğŸ“± Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„Ø§Øª', items: [{n:'Ù‡ÙˆØ§ØªÙ Ø°ÙƒÙŠØ©', i:'https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=300'}, {n:'Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª', i:'https://images.unsplash.com/photo-1541140532154-b024fd70a0d9?w=300'}] },
        { id: 'laps', title: 'ğŸ’» Ù„Ø§Ø¨ØªÙˆØ¨Ø§Øª', items: [{n:'Ø£Ø¬Ù‡Ø²Ø© ÙƒÙ…Ø¨ÙŠÙˆØªØ±', i:'https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=300'}, {n:'Ù…Ù„Ø­Ù‚Ø§Øª', i:'https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=300'}] },
        { id: 'women', title: 'ğŸ’ƒ Ù†Ø³Ø§Ø¦ÙŠ', items: [{n:'Ø£Ø²ÙŠØ§Ø¡ Ù†Ø³Ø§Ø¦ÙŠØ©', i:'https://images.unsplash.com/photo-1567401893414-76b7b1e5a7a5?w=300'}, {n:'ØªØ¬Ù…ÙŠÙ„', i:'https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?w=300'}] },
        { id: 'kids', title: 'ğŸ‘¶ Ø£Ø·ÙØ§Ù„ÙŠ', items: [{n:'Ù…Ù„Ø§Ø¨Ø³ Ø£Ø·ÙØ§Ù„', i:'https://images.unsplash.com/photo-1519702777585-07f121d78a23?w=300'}, {n:'Ø£Ù„Ø¹Ø§Ø¨', i:'https://images.unsplash.com/photo-1537151608828-ea2b11777ee8?w=300'}] },
        { id: 'perf', title: 'âœ¨ Ø¹Ø·ÙˆØ±', items: [{n:'Ø¨Ø®ÙˆØ± ÙˆØ¹Ø·ÙˆØ±', i:'https://images.unsplash.com/photo-1595433707802-6806f3fc4a1c?w=300'}, {n:'Ù…Ø§Ø±ÙƒØ§Øª', i:'https://images.unsplash.com/photo-1541643600914-78b084683601?w=300'}] },
        { id: 'food', title: 'ğŸ›’ Ø¨Ù‚Ø§Ù„Ø©', items: [{n:'Ù…ÙˆØ§Ø¯ Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠØ©', i:'https://images.unsplash.com/photo-1542838132-92c53300491e?w=300'}, {n:'Ø²ÙŠÙˆØª ÙˆØ´Ø§ÙŠ', i:'https://images.unsplash.com/photo-1581448670514-4a4759600021?w=300'}] },
        { id: 'tools', title: 'ğŸ› ï¸ Ù…ØºØ§Ù„Ù‚', items: [{n:'Ø£Ø¯ÙˆØ§Øª ÙƒÙ‡Ø±Ø¨Ø§Ø¡', i:'https://images.unsplash.com/photo-1621905252507-b35482cd84b0?w=300'}, {n:'Ø³Ø¨Ø§ÙƒØ© ÙˆØ¨Ù†Ø§Ø¡', i:'https://images.unsplash.com/photo-1581244276891-8bb499a0d334?w=300'}] }
    ];

    const content = document.getElementById('main-content');
    sections.forEach(s => {
        let sHtml = `<div id="${s.id}" style="padding:15px 10px 5px; font-weight:bold; color:var(--primary);">${s.title}</div><div class="products-grid">`;
        s.items.forEach(item => {
            sHtml += `<div class="product-card" onclick="openLayer('${s.title}', '${s.id}')"><img src="${item.i}"><b>${item.n}</b></div>`;
        });
        sHtml += `</div>`;
        content.innerHTML += sHtml;
    });

    function openLayer(title, id) {
        currentCat = id;
        document.getElementById('layerTitle').innerText = title;
        document.getElementById('overlay').style.display = 'block';
        loadCloud(id);
    }
    function closeLayer() { document.getElementById('overlay').style.display = 'none'; }

    function saveToCloud() {
        const n = document.getElementById('pName').value;
        const d = document.getElementById('pDesc').value;
        const w = document.getElementById('pWa').value;
        if(!n || !w) return alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù… ÙˆØ±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨");
        db.ref('products/' + currentCat).push({ name: n, desc: d, wa: w });
        alert("Ù…Ø¨Ø±ÙˆÙƒ! Ø¨Ø¶Ø§Ø¹ØªÙƒ Ø§Ù„Ø¢Ù† Ù…Ù†Ø´ÙˆØ±Ø© Ù„ÙƒÙ„ Ø£Ù‡Ù„ Ø§Ù„Ø³ÙˆØ¯Ø§Ù† ğŸ‡¸ğŸ‡©");
        document.getElementById('pName').value = ''; document.getElementById('pDesc').value = '';
    }

    function loadCloud(id) {
        const list = document.getElementById('items-list');
        db.ref('products/' + id).on('value', (snap) => {
            const data = snap.val();
            if(!data) { list.innerHTML = '<center style="padding:40px; color:#999;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ø±ÙˆØ¶ Ù…Ù† Ø§Ù„ØªØ¬Ø§Ø± Ø­Ø§Ù„ÙŠØ§Ù‹</center>'; return; }
            let html = '';
            for(let key in data) {
                const item = data[key];
                html += `<div class="approved-card"><b>ğŸ“¦ ${item.name}</b><p style="font-size:0.9rem; color:#555;">${item.desc}</p><button class="buy-now" onclick="buy('${item.wa}', '${item.name}')">ØªÙˆØ§ØµÙ„ Ù„Ù„Ø´Ø±Ø§Ø¡ (Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©: Ù…Ø­Ù…Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ù…Ø¹Ø·ÙŠ) âœ…</button></div>`;
            }
            list.innerHTML = html;
        });
    }

    function buy(wa, p) {
        const msg = encodeURIComponent(`Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø±ÙŠØ¯ Ø´Ø±Ø§Ø¡ [${p}] Ù…Ù† Ø³ÙˆÙ‚ Ø§Ù„Ø³ÙˆØ¯Ø§Ù† Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ.\n---\nâš ï¸ Ø¥Ø®Ø·Ø§Ø± Ø¨Ù†ÙƒÙŠ:\nØ§Ù„Ø§Ø³Ù…: Ù…Ø­Ù…Ø¯ Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ø¹Ø·ÙŠ Ø¹Ù„ÙŠ\nØ§Ù„Ø¨Ù†Ùƒ: Ø¨Ù†Ùƒ Ø§Ù„Ø®Ø±Ø·ÙˆÙ…\nØ§Ù„Ø­Ø³Ø§Ø¨: 4426148\n(Ø¯ÙØ¹ Ø¹Ù…ÙˆÙ„Ø© 1% Ù„Ù„Ù…ØµÙ…Ù… Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø­Ù‚ÙˆÙ‚)`);
        window.location.href = `https://wa.me/${wa}?text=${msg}`;
    }

    function search() {
        let v = document.getElementById('sInp').value.toLowerCase();
        let cards = document.getElementsByClassName('product-card');
        for(let c of cards) { c.style.display = c.innerText.toLowerCase().includes(v) ? "block" : "none"; }
    }
    function go(id) { document.getElementById(id).scrollIntoView({ behavior: 'smooth' }); }
</script>
</body>
</html>

